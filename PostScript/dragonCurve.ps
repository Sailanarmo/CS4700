%!PS
%%BoundingBox: 0 0 550 400

/ifDraw false def
/rotation 0 def
/squareMagic 2 sqrt def
/turn {
         rotation add /rotation exch def
      } def
/forward {
            dup rotation cos mul
           exch rotation sin mul
           ifDraw
                { rlineto }
                { rmoveto }
           ifelse
         } def
/drawing {
          /ifDraw false def
       } def
/notDrawing {
             /ifDraw true def
         } def
 
/dragonCurve { 
          dup 
          dup 1 get 0 eq
              { 0 get forward } 
              { dup 2 get 45 mul turn
                  dup aload pop pop
                  1 sub exch squareMagic div exch
                  1 3 array astore dragonCurve pop
                dup 2 get 90 mul neg turn
                  dup aload pop pop
                  1 sub exch squareMagic div exch
                  -1 3 array astore dragonCurve
                dup 2 get 45 mul turn
              }
          ifelse
          pop
        } def
150 150 moveto notDrawing [ 300 12 1 ] dragonCurve stroke
showpage
